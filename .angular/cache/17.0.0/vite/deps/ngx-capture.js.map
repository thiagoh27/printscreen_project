{
  "version": 3,
  "sources": ["../../../../../node_modules/ngx-capture/fesm2020/ngx-capture.mjs"],
  "sourcesContent": ["import * as i0 from '@angular/core';\nimport { Injectable, EventEmitter, Component, ViewChild, Input, Output, NgModule, CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';\nimport html2canvas from 'html2canvas';\nimport { of, from, Subject } from 'rxjs';\nimport { take, tap } from 'rxjs/operators';\nconst _c0 = [\"rect\"];\nconst _c1 = [\"over\"];\nconst _c2 = [\"*\"];\nclass NgxCaptureService {\n  getImage(screen, fullCapture, cropDimensions) {\n    let options = {\n      logging: false,\n      useCORS: true\n    };\n    if (!fullCapture && cropDimensions.width > 10 && cropDimensions.height > 10) {\n      options = {\n        ...options,\n        ...cropDimensions\n      };\n    } else if (!fullCapture) {\n      return of(null);\n    }\n    return from(html2canvas(screen, options).then(canv => {\n      const img = canv.toDataURL('image/png');\n      return img;\n    }, err => {\n      throw new Error(err);\n    }).catch(res => {\n      throw new Error(res);\n    }));\n  }\n  downloadImage(img) {\n    const element = document.createElement('a');\n    element.setAttribute('href', img);\n    element.setAttribute('download', 'capture');\n    element.style.display = 'none';\n    document.body.appendChild(element);\n    element.click();\n    document.body.removeChild(element);\n  }\n}\nNgxCaptureService.ɵfac = function NgxCaptureService_Factory(t) {\n  return new (t || NgxCaptureService)();\n};\nNgxCaptureService.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: NgxCaptureService,\n  factory: NgxCaptureService.ɵfac,\n  providedIn: 'root'\n});\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(NgxCaptureService, [{\n    type: Injectable,\n    args: [{\n      providedIn: 'root'\n    }]\n  }], null, null);\n})();\nclass NgxCaptureComponent {\n  constructor(captureService) {\n    this.captureService = captureService;\n    this.resultImage = new EventEmitter();\n    this.isDrawing = false;\n    this.mouseStart = {\n      x: 0,\n      y: 0\n    };\n    this.cropDimensions = {\n      x: 0,\n      y: 0,\n      width: 0,\n      height: 0\n    };\n    this.destroy$ = new Subject();\n  }\n  ngOnInit() {\n    setTimeout(() => {\n      this.rect = this.rectangle.nativeElement;\n      this.captureZone = this.overlay.nativeElement;\n      if (!this.captureZone) {\n        console.warn('\"captureZone\" is not set');\n        return;\n      }\n      this.captureZone.onmousedown = e => this.startCapture(e);\n      this.captureZone.onmousemove = e => this.drawRect(e);\n      this.captureZone.onmouseup = () => this.endCapture();\n    }, 2000);\n  }\n  startCapture(e) {\n    const mouse = this.setMousePosition(e, true);\n    this.isDrawing = true;\n    this.cropDimensions = {\n      x: mouse.x,\n      y: mouse.y,\n      width: 0,\n      height: 0\n    };\n    this.captureZone.style.cursor = 'crosshair';\n  }\n  drawRect(e) {\n    if (this.isDrawing) {\n      const mouse = this.setMousePosition(e, false);\n      this.cropDimensions = {\n        x: mouse.x - this.mouseStart.x < 0 ? mouse.x : this.mouseStart.x,\n        y: mouse.y - this.mouseStart.y < 0 ? mouse.y : this.mouseStart.y,\n        width: Math.abs(mouse.x - this.mouseStart.x),\n        height: Math.abs(mouse.y - this.mouseStart.y)\n      };\n      this.setRectangle();\n    }\n  }\n  setMousePosition(e, isStart = false) {\n    const ev = e || window.event; // Moz || IE\n    const mouse = {\n      x: 0,\n      y: 0\n    };\n    if (ev.pageX) {\n      // Moz\n      mouse.x = ev.clientX;\n      mouse.y = ev.clientY;\n    } else if (ev.clientX) {\n      // IE\n      mouse.x = ev.clientX + document.body.scrollLeft;\n      mouse.y = ev.clientY + document.body.scrollTop;\n    }\n    if (isStart) {\n      this.mouseStart.x = mouse.x;\n      this.mouseStart.y = mouse.y;\n    }\n    return mouse;\n  }\n  endCapture() {\n    this.captureZone.style.cursor = 'default';\n    this.isDrawing = false;\n    this.captureService.getImage(this.target, false, {\n      ...this.cropDimensions,\n      x: this.cropDimensions.x + window.scrollX,\n      y: this.cropDimensions.y + window.scrollY\n    }).pipe(take(1), tap(img => {\n      this.resultImage.emit(img);\n    })).subscribe();\n    this.cropDimensions = {\n      x: 0,\n      y: 0,\n      width: 0,\n      height: 0\n    };\n    this.setRectangle();\n  }\n  setRectangle() {\n    this.rect.style.left = this.cropDimensions.x + 'px';\n    this.rect.style.top = this.cropDimensions.y + 'px';\n    this.rect.style.width = this.cropDimensions.width + 'px';\n    this.rect.style.height = this.cropDimensions.height + 'px';\n  }\n}\nNgxCaptureComponent.ɵfac = function NgxCaptureComponent_Factory(t) {\n  return new (t || NgxCaptureComponent)(i0.ɵɵdirectiveInject(NgxCaptureService));\n};\nNgxCaptureComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: NgxCaptureComponent,\n  selectors: [[\"ngx-capture\"]],\n  viewQuery: function NgxCaptureComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 7);\n      i0.ɵɵviewQuery(_c1, 7);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.rectangle = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.overlay = _t.first);\n    }\n  },\n  inputs: {\n    target: \"target\"\n  },\n  outputs: {\n    resultImage: \"resultImage\"\n  },\n  ngContentSelectors: _c2,\n  decls: 5,\n  vars: 0,\n  consts: [[1, \"overlay\"], [\"over\", \"\"], [1, \"rectangle\"], [\"rect\", \"\"]],\n  template: function NgxCaptureComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵprojectionDef();\n      i0.ɵɵprojection(0);\n      i0.ɵɵelementStart(1, \"div\", 0, 1);\n      i0.ɵɵelement(3, \"div\", 2, 3);\n      i0.ɵɵelementEnd();\n    }\n  },\n  styles: [\".overlay[_ngcontent-%COMP%]{top:0;left:0;position:fixed;width:100vw;height:100vh}.rectangle[_ngcontent-%COMP%]{border:1px solid #ff0000;position:absolute}\"]\n});\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(NgxCaptureComponent, [{\n    type: Component,\n    args: [{\n      selector: 'ngx-capture',\n      template: `\n    <ng-content></ng-content>\n    <div class=\"overlay\" #over>\n      <div class=\"rectangle\" #rect></div>\n    </div>\n  `,\n      styles: [\".overlay{top:0;left:0;position:fixed;width:100vw;height:100vh}.rectangle{border:1px solid #ff0000;position:absolute}\\n\"]\n    }]\n  }], function () {\n    return [{\n      type: NgxCaptureService\n    }];\n  }, {\n    rectangle: [{\n      type: ViewChild,\n      args: ['rect', {\n        static: true\n      }]\n    }],\n    overlay: [{\n      type: ViewChild,\n      args: ['over', {\n        static: true\n      }]\n    }],\n    target: [{\n      type: Input\n    }],\n    resultImage: [{\n      type: Output\n    }]\n  });\n})();\nclass NgxCaptureModule {}\nNgxCaptureModule.ɵfac = function NgxCaptureModule_Factory(t) {\n  return new (t || NgxCaptureModule)();\n};\nNgxCaptureModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n  type: NgxCaptureModule,\n  declarations: [NgxCaptureComponent],\n  exports: [NgxCaptureComponent]\n});\nNgxCaptureModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({});\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(NgxCaptureModule, [{\n    type: NgModule,\n    args: [{\n      declarations: [NgxCaptureComponent],\n      imports: [],\n      exports: [NgxCaptureComponent],\n      schemas: [CUSTOM_ELEMENTS_SCHEMA]\n    }]\n  }], null, null);\n})();\n\n/*\r\n * Public API Surface of ngx-capture\r\n */\n\n/**\r\n * Generated bundle index. Do not edit.\r\n */\n\nexport { NgxCaptureComponent, NgxCaptureModule, NgxCaptureService };\n"],
  "mappings": "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",
  "names": []
}
